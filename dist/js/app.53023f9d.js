(function(t){function e(e){for(var a,o,r=e[0],l=e[1],u=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);c&&c(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var c=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0b72":function(t,e,s){"use strict";var a=s("35c7"),n=s.n(a);n.a},"35c7":function(t,e,s){},3780:function(t,e,s){"use strict";var a=s("66c2"),n=s.n(a);n.a},"4ffd":function(t,e,s){t.exports=s.p+"img/logo.3d4316aa.png"},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Navbar",{attrs:{stupanj:t.stupanj,ime:t.ime,prezime:t.prezime}}),s("router-view",{on:{prihvatio:t.prihvati,prihvatio1:t.prihvati1,prihvatio2:t.prihvati2}})],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12",attrs:{id:"nav"}},["Login"!==this.$route.name&&0!=t.stupanj?a("p",{staticClass:"stupanj"},[t._v(t._s(t.stupanj))]):t._e(),"Login"!==this.$route.name&&0===t.stupanj?a("p",{staticClass:"stupanj"},[t._v(t._s(t.ime)+" "+t._s(t.prezime))]):t._e(),a("img",{staticClass:"logo",attrs:{src:s("4ffd"),contain:""}}),"Login"!==this.$route.name?a("button",{staticClass:"logout",on:{click:t.logout}},[t._v("Logout")]):t._e()])},r=[],l=s("8aa5"),u=s.n(l),c={name:"Navbar",props:["stupanj","ime","prezime"],data:function(){return{userDoc:null,user:u.a.auth().currentUser,phase:null}},methods:{logout:function(){var t=this;u.a.auth().signOut().then((function(){t.$router.go({name:"Login"})}))}}},d=c,p=s("2877"),h=Object(p["a"])(d,o,r,!1,null,null,null),f=h.exports,m={name:"App",components:{Navbar:f},data:function(){return{stupanj:0,ime:null,prezime:null}},methods:{prihvati:function(t){this.stupanj=t},prihvati1:function(t){this.ime=t},prihvati2:function(t){this.prezime=t}}},v=m,b=(s("b184"),Object(p["a"])(v,n,i,!1,null,null,null)),_=b.exports,g=(s("45fc"),s("8c4f")),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[!1===t.isRef?s("Student",{attrs:{phase:t.phase},on:{prihvatio:t.prihvati}}):t._e(),!0===t.isRef?s("Referada"):t._e()],1)},j=[],k=(s("4160"),s("159b"),s("e71f"),{apiKey:"AIzaSyAV2WvoGZdnQ3atlzlj0qaxLLxNKKOtwFo",authDomain:"expis-frontend.firebaseapp.com",databaseURL:"https://expis-frontend.firebaseio.com",projectId:"expis-frontend",storageBucket:"expis-frontend.appspot.com",messagingSenderId:"423122781828",appId:"1:423122781828:web:7ee8ee2f3053709b51e4d1",measurementId:"G-1NRE7TB6ZV"}),C=u.a.initializeApp(k);u.a.analytics();var w=C.firestore(),D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home top10"},[t.phase>=1?s("Phase1",{attrs:{phase:t.phase},on:{prihvatio:t.prihvati}}):t._e(),t.phase>=2?s("Phase2"):t._e(),t.phase>=3?s("Phase3"):t._e()],1)},x=[],E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("table",{staticClass:"table table-striped offset-1 col-10"},[s("tbody",[s("tr",[s("td",{staticClass:"table_title"},[t._v("Ime")]),s("td",{staticClass:"table_content"},[t._v(t._s(t.ime))]),s("td",{staticClass:"table_title"},[t._v("Godina")]),s("td",{staticClass:"table_content"},[t._v(t._s(t.godina))])]),s("tr",[s("td",{staticClass:"table_title"},[t._v("Prezime")]),s("td",{staticClass:"table_content"},[t._v(t._s(t.prezime))]),s("td",{staticClass:"table_title"},[t._v("Studij")]),s("td",{staticClass:"table_content"},[t._v(t._s(t.studij))])]),s("tr",[s("td",{staticClass:"table_title"},[t._v("OIB")]),s("td",{staticClass:"table_content"},[t._v(t._s(t.oib))]),s("td",{staticClass:"table_title"},[t._v("Smjer")]),null===t.smjerovi?s("td",{staticClass:"table_content"},[t._v("/")]):t._e(),null!==t.smjerovi?s("td",{staticClass:"table_content"},[s("ol",t._l(t.smjerovi,(function(e,a){return s("li",{key:a},[t._v(" "+t._s(a+1)+". "+t._s(e)+" ")])})),0),1===t.phase?s("button",{staticClass:"btn btn-primary",on:{click:t.showModal}},[t._v("Izmjeni")]):t._e(),!0===t.isModalVisible?s("FET",{attrs:{smjerovi:t.smjerovi},on:{close:t.closeModal}}):t._e()],1):t._e()])])]),1===t.phase?s("div",[s("button",{staticClass:"btn btn-primary",on:{click:t.prihvati}},[t._v("Prihvati")]),s("button",{staticClass:"btn btn-primary",on:{click:t.showModal}},[t._v("Odbij")])]):t._e()])},O=[],P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-backdrop1"},[s("div",{staticClass:"modal1 col-4",attrs:{role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"}},[s("header",{staticClass:"modal-header",attrs:{id:"modalTitle"}},[t._t("header",[t._v(" Izbor prioriteta smjerova ")])],2),s("section",{staticClass:"modal-body",attrs:{id:"modalDescription"}},[t._t("body",[s("ul",{staticClass:"list-group"},t._l(t.smjerovi,(function(e,a){return s("li",{key:a,staticClass:"list-group-item"},[s("span",[t._v(t._s(e))]),s("div",{staticClass:"btn-group button-caret-group"},[s("button",{staticClass:"btn button-caret-up",attrs:{disabled:0==a},on:{click:function(e){return t.move(a,a-1)}}},[s("i",{staticClass:"fas fa-caret-square-up"})]),s("button",{staticClass:"btn button-caret-down",attrs:{disabled:a==t.smjerovi.length-1},on:{click:function(e){return t.move(a,a+1)}}},[s("i",{staticClass:"fas fa-caret-square-down"})])])])})),0)])],2),s("footer",{staticClass:"modal-footer"},[t._t("footer",[s("button",{staticClass:"btn-close",attrs:{type:"button","aria-label":"Close modal"},on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v("Done")])])],2)])])},S=[],$=(s("a434"),{name:"modal",props:["smjerovi"],methods:{close:function(){this.$emit("close",this.smjerovi)},move:function(t,e){var s=this.smjerovi[t],a=this.smjerovi[e];this.smjerovi.splice(t,1,a),this.smjerovi.splice(e,1,s)}}}),z=$,M=Object(p["a"])(z,P,S,!1,null,null,null),I=M.exports,L={name:"phase1",props:["phase"],components:{FET:I},data:function(){return{userDoc:null,user:u.a.auth().currentUser,ime:"",prezime:"",oib:"",godina:"",studij:"",smjerovi:"",isModalVisible:!1}},methods:{showModal:function(){this.isModalVisible=!0},closeModal:function(t){this.smjerovi=t,this.isModalVisible=!1},prihvati:function(){this.change(),this.$emit("prihvatio",2)},userDocListener:function(){var t=this;w.collection("users").where("uID","==",this.user.uid).onSnapshot((function(e){e.forEach((function(e){t.userDoc=e.data(),t.ime=t.userDoc.firstName,t.prezime=t.userDoc.lastName,t.oib=t.userDoc.oib,t.godina=t.userDoc.year,t.studij=t.userDoc.university,t.smjerovi=t.userDoc.courses}))}))},change:function(){var t=this;w.collection("users").where("uID","==",this.user.uid).onSnapshot((function(e){console.log(e),e.forEach((function(e){console.log(e),w.collection("users").doc(e.id).update({phase:2,courses:t.smjerovi})}))}))}},mounted:function(){this.userDocListener()}},N=L,U=Object(p["a"])(N,E,O,!1,null,null,null),B=U.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12 flexdisplay"},[s("div",[s("a",{attrs:{href:t.račun,target:"_blank"}},[s("button",[t._v("Račun za upis")])]),s("a",{attrs:{href:t.prototip,target:"_blank"}},[s("button",[t._v("Prototip ugovora")])])]),s("div",{staticClass:"flexdisplay"},[s("UploadBill",{attrs:{status:t.status},on:{send:t.storeBill}}),-1===t.status?s("a",{attrs:{href:t.upload,target:"_blank"}},[s("button",{staticClass:"red-button"},[t._v("Odbijeno")])]):t._e(),0===t.status?s("a",{attrs:{href:t.upload,target:"_blank"}},[s("button",{staticClass:"yellow-button"},[t._v("Obrada")])]):t._e(),1===t.status?s("a",{attrs:{href:t.upload,target:"_blank"}},[s("button",{staticClass:"green-button"},[t._v("Prihvaćeno")])]):t._e()],1)])},R=[],T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid",staticStyle:{"text-align":"center"}},[s("input",{staticClass:"form-control-file",attrs:{type:"file",id:"selectedFile",accept:"bill/*"},on:{change:t.previewBill}}),s("button",{attrs:{disabled:0===t.status||1===t.status},on:{click:function(e){return e.preventDefault(),t.getBill(e)}}},[t._v("Upload potvrde o plačanju")])])},V=[],F={name:"UploadBill",props:["status"],data:function(){return{billData:""}},methods:{getBill:function(){document.getElementById("selectedFile").click()},previewBill:function(t){var e=this,s=t.target;if(s.files&&s.files[0]){var a=new FileReader;a.onload=function(t){e.billData=t.target.result,e.$emit("send",e.billData)},a.readAsDataURL(s.files[0])}}}},q=F,W=(s("3780"),Object(p["a"])(q,T,V,!1,null,null,null)),H=W.exports,G={name:"phase2",props:["stupanj"],components:{UploadBill:H},data:function(){return{user:u.a.auth().currentUser,"račun":"",prototip:"",upload:"",status:""}},methods:{storeBill:function(t){this.change(t,0)},userDocListener:function(){var t=this;this.user=u.a.auth().currentUser,w.collection("users").where("uID","==",this.user.uid).onSnapshot((function(e){e.forEach((function(e){t.userDoc=e.data(),t.račun=e.data().billPt,t.prototip=e.data().contractPt,t.upload=e.data().billFull,t.status=e.data().status}))}))},change:function(t,e){this.user=u.a.auth().currentUser,w.collection("users").where("uID","==",this.user.uid).get().then((function(s){s.forEach((function(s){w.collection("users").doc(s.id).update({billFull:t,status:e})}))}))}},mounted:function(){this.userDocListener()}},J=G,K=Object(p["a"])(J,A,R,!1,null,null,null),Z=K.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a",{attrs:{href:t.ugovor,target:"_blank"}},[s("button",[t._v("Ugovor za potpisati")])]),s("a",{attrs:{href:t.identitet,target:"_blank"}},[s("button",[t._v("AAI pristupni podaci")])])])},X=[],Y={name:"phase3",data:function(){return{ugovor:"https://www.fthm.uniri.hr/images/doktorski/obrasci/Ugovor_o_studiranju_PHD_full_time_21_02_2019.pdf",identitet:"http://os-trnsko-zg.skole.hr/upload/os-trnsko-zg/images/static3/2256/attachment/Elektronicki_identitet-doc.pdf"}},methods:{}},tt=Y,et=Object(p["a"])(tt,Q,X,!1,null,null,null),st=et.exports,at={name:"Home",props:["phase"],components:{Phase1:B,Phase2:Z,Phase3:st},data:function(){return{ime:"Ivan",prezime:"Ivanić",oib:"012345678",godina:"1",studij:"FET",smjerovi:["Financijski management","Management i poduzetništvo","Marketinško upravljanje","Informatički menadžment","Turizam"],isModalVisible:!1}},methods:{prihvati:function(t){this.$emit("prihvatio",t)}}},nt=at,it=Object(p["a"])(nt,D,x,!1,null,null,null),ot=it.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("h2",[t._v("Čekaju")]),t._l(t.usersWait,(function(e){return s("BillEntry",{key:e.oib,staticStyle:{background:"yellow"},attrs:{user:e},on:{change1:t.changing1,change:t.changing}})}))],2),s("div",[s("h2",[t._v("Odbijeni")]),t._l(t.usersDen,(function(e){return s("BillEntry",{key:e.oib,staticStyle:{background:"red"},attrs:{user:e},on:{change1:t.changing1,change:t.changing}})}))],2),s("div",[s("h2",[t._v("Prihvaćeni")]),t._l(t.usersApp,(function(e){return s("BillEntry",{key:e.oib,staticStyle:{background:"green"},attrs:{user:e},on:{change1:t.changing1,change:t.changing}})}))],2),s("div",[s("h2",[t._v("Nisu u obradi")]),t._l(t.usersNon,(function(e){return s("BillEntry",{key:e.oib,staticStyle:{background:"lightgray"},attrs:{user:e},on:{change1:t.changing1,change:t.changing}})}))],2)])},lt=[],ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticStyle:{width:"90%",margin:"0 auto"}},[s("tr",{staticClass:"dodatak"},[s("td",{staticStyle:{width:"10%"}},[s("p",[t._v(t._s(this.user.year))])]),s("td",{staticStyle:{width:"20%"}},[s("p",[t._v(t._s(this.user.firstName))])]),s("td",{staticStyle:{width:"20%"}},[s("p",[t._v(t._s(this.user.lastName))])]),s("td",{staticStyle:{width:"10%"}},[s("p",[t._v(t._s(this.user.oib))])]),s("td",{staticStyle:{width:"10%"}},[s("p",[t._v(t._s(this.user.university))])]),s("td",{staticStyle:{width:"10%"}},[s("button",{on:{click:t.showModal}},[t._v("Proširi")])])]),!0===t.isModalVisible?s("Expand",{attrs:{user:t.user},on:{close:t.closeModal}}):t._e()],1)},ct=[],dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-backdrop1"},[s("div",{staticClass:"modal1 col-4",attrs:{role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"}},[s("header",{staticClass:"modal-header",attrs:{id:"modalTitle"}},[t._t("header",[t._v(" Podaci o studentu ")])],2),s("section",{staticClass:"modal-body",attrs:{id:"modalDescription"}},[t._t("body",[t._v(" Tu nešto... ")])],2),s("footer",{staticClass:"modal-footer"},[t._t("footer",[s("button",{staticClass:"btn-close",attrs:{type:"button","aria-label":"Close modal"},on:{click:t.approve}},[t._v("Prihvati")]),s("button",{staticClass:"btn-close",attrs:{type:"button","aria-label":"Close modal"},on:{click:t.decline}},[t._v("Odbij")])])],2)])])},pt=[],ht={props:["user"],name:"modal",data:function(){return{}},methods:{close:function(t){this.$emit("close",t)},approve:function(){this.close(1)},decline:function(){this.close(-1)}}},ft=ht,mt=Object(p["a"])(ft,dt,pt,!1,null,null,null),vt=mt.exports,bt={props:["user"],components:{Expand:vt},data:function(){return{isModalVisible:!1}},methods:{showModal:function(){this.isModalVisible=!0},closeModal:function(t){this.$emit("change1",this.user.oib),this.$emit("change",t),this.isModalVisible=!1}},computed:{}},_t=bt,gt=(s("0b72"),Object(p["a"])(_t,ut,ct,!1,null,null,null)),yt=gt.exports,jt={components:{BillEntry:yt},data:function(){return{usersWait:[],usersDen:[],usersApp:[],usersNon:[],user:null,userDoc:u.a.auth().currentUser,filterDropdown:!1,searchTerm:"",status:null,temp:""}},methods:{changing:function(t){var e=2;1===t&&(e=3),console.log("TOSADPRIJE"),console.log(this.temp),w.collection("users").where("oib","==",this.temp).get().then((function(s){s.forEach((function(s){w.collection("users").doc(s.id).update({phase:e,status:t})}))}))},changing1:function(t){this.temp=t},userDocListener:function(){var t=this;w.collection("users").where("isRef","==",!1).onSnapshot((function(e){t.usersWait=[],t.usersDen=[],t.usersApp=[],t.usersNon=[],e.forEach((function(e){var s=e.data();!1===s.isRef&&(0===s.status?t.usersWait.push(s):-1===s.status?t.usersDen.push(s):1===s.status?t.usersApp.push(s):t.usersNon.push(s))}))}))}},mounted:function(){this.userDocListener()}},kt=jt,Ct=Object(p["a"])(kt,rt,lt,!1,null,null,null),wt=Ct.exports,Dt={components:{Student:ot,Referada:wt},data:function(){return{profile:null,user:u.a.auth().currentUser,currentUser:null,loading:!0,userDoc:null,phase:null,isRef:null,ime:null,prezime:null}},methods:{prihvati:function(t){this.phase=t,this.$emit("prihvatio",t)},userDocListener:function(){var t=this;w.collection("users").where("uID","==",this.user.uid).onSnapshot((function(e){e.forEach((function(e){t.userDoc=e.data(),t.isRef=e.data().isRef,t.phase=e.data().phase,t.ime=e.data().firstName,t.prezime=e.data().lastName})),t.$emit("prihvatio",t.phase),t.$emit("prihvatio1",t.ime),t.$emit("prihvatio2",t.prezime)}))}},mounted:function(){this.userDocListener()}},xt=Dt,Et=Object(p["a"])(xt,y,j,!1,null,null,null),Ot=Et.exports,Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top150"},[s("h2",[t._v("Login")]),s("div",{staticClass:"form-group offset-4 col-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&!t.username},attrs:{type:"text","aria-describedby":"emailHelp",placeholder:"Username",name:"username"},domProps:{value:t.username},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterClicked()},input:function(e){e.target.composing||(t.username=e.target.value)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.submitted&&!t.username,expression:"submitted && !username"}],staticClass:"invalid-feedback"},[t._v("Username is required")])]),s("div",{staticClass:"form-group offset-4 col-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&!t.password},attrs:{type:"password",placeholder:"Password",name:"password"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterClicked()},input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.submitted&&!t.password,expression:"submitted && !password"}],staticClass:"invalid-feedback"},[t._v("Password is required")])]),s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("Login")]),t.feedback?s("p",{staticClass:"mt-3 feedback"},[t._v(t._s(t.feedback))]):t._e()])])},St=[],$t={data:function(){return{username:null,password:null,feedback:null,submitted:null}},methods:{login:function(){var t=this;this.username&&this.password?(this.feedback=null,u.a.auth().signInWithEmailAndPassword(this.username,this.password).then((function(){t.$router.push({name:"HomePage"})})).catch((function(e){t.feedback=e.message}))):this.feedback="Please fill out both fields"},enterClicked:function(){this.login()}}},zt=$t,Mt=Object(p["a"])(zt,Pt,St,!1,null,null,null),It=Mt.exports;a["a"].use(g["a"]);var Lt=[{path:"/",name:"HomePage",component:Ot,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:It}],Nt=new g["a"]({mode:"history",base:"/",routes:Lt});Nt.beforeEach((function(t,e,s){if(t.matched.some((function(t){return t.meta.requiresAuth}))){var a=u.a.auth().currentUser;a?s():s({name:"Login"})}else s()}));var Ut=Nt;s("4989"),s("ab8b"),s("15f5"),s("7051");a["a"].config.productionTip=!1;var Bt=null;u.a.auth().onAuthStateChanged((function(){Bt||(Bt=new a["a"]({router:Ut,render:function(t){return t(_)}}).$mount("#app"))}))},"66c2":function(t,e,s){},a062:function(t,e,s){},b184:function(t,e,s){"use strict";var a=s("a062"),n=s.n(a);n.a}});
//# sourceMappingURL=app.53023f9d.js.map